"use strict";(self.webpackChunktest_web=self.webpackChunktest_web||[]).push([[4939],{573:(e,t,l)=>{l.d(t,{Z:()=>n});var s=l(43973);const a="/rack",n=s.R.injectEndpoints({endpoints:e=>({productRack:e.mutation({query:e=>({url:"".concat(a,"/Product-Rack"),method:"PUT",...e})}),createRacks:e.mutation({query:e=>({url:"".concat(a,"/"),method:"POST",...e})}),getRack:e.query({query:e=>{const{reloadItems:t}=e;return{url:"".concat(a),method:"GET"}}}),getRackShelves:e.query({query:e=>{const{reloadItems:t}=e;return{url:"".concat(a,"/shelves"),method:"GET"}}}),getShelvesByRackId:e.query({query:e=>{const{id:t}=e;return{url:"".concat(a,"/").concat(t),method:"GET"}}}),getShelves:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/shelves"),method:"GET"}}}),getProductsByRack:e.query({query:e=>{const{RackId:t}=e;return{url:"".concat(a,"/Rack-Products/").concat(t),method:"GET"}}}),getStats:e.query({query:e=>({url:"".concat(a,"/super-admin/userStatsChart"),method:"GET"})})})})},98267:(e,t,l)=>{l.d(t,{Z:()=>n});var s=l(43973);const a="/req",n=s.R.injectEndpoints({endpoints:e=>({confirmRelease:e.mutation({query:e=>({url:"".concat(a,"/confirm-release"),method:"POST",...e})}),approval:e.mutation({query:e=>({url:"".concat(a,"/approval"),method:"POST",...e})}),request:e.mutation({query:e=>({url:"".concat(a,"/request"),method:"POST",...e})}),getRequest:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/"),method:"GET"}}}),getRequestDetail:e.query({query:e=>{const{RequestCode:t}=e;return{url:"".concat(a,"/Get-Request-Detail/").concat(t),method:"GET"}}}),getReleasedStocks:e.query({query:e=>{const{RequestCode:t}=e;return{url:"".concat(a,"/Get-Released-Stocks/").concat(t),method:"GET"}}}),getTagging:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/"),method:"GET"}}}),getPendingRelease:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/Pending-Release"),method:"GET"}}}),getProcessedApprovalRequest:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/Get-Processed-Approval-Requests"),method:"GET"}}}),getCategories:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(a,"/category"),method:"GET"}}})})})},21049:(e,t,l)=>{l.d(t,{Z:()=>n});var s=l(43973);const a="/stocks",n=s.R.injectEndpoints({endpoints:e=>({stockIntake:e.mutation({query:e=>({url:"".concat(a,"/intake"),method:"POST",...e})}),stockTransferIntake:e.mutation({query:e=>({url:"".concat(a,"/Transfer-Intake"),method:"POST",...e})}),stockOutbound:e.mutation({query:e=>({url:"".concat(a,"/Outbound"),method:"POST",...e})}),getIntakes:e.query({query:e=>({url:"".concat(a,"/intakes"),method:"GET"})})})})},54939:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var s=l(72791),a=l(75017),n=l(81346),r=l(24020),d=l(81898),c=l(17205),i=l(21680),o=l(19773),u=l(24390),h=l(69963),m=l(9827),v=l(60807),x=l(56650),j=l(4565),f=l(48928),Z=l(8152),y=l(21049),q=l(573),p=l(98267),g=l(70393),w=l(38089),N=(l(5384),l(95048)),b=l(80184);const k=()=>{var e,t,l;(0,N.I0)();const[k,R]=s.useState(null),[C,S]=s.useState(null),[T,G]=s.useState(null),[P,E]=s.useState(null),[I,B]=s.useState(null),[O,Q]=s.useState(null),[M,W]=s.useState({shelfCode:"",productBarcode:"",quantity:"",comment:"",requestCode:""}),{enqueueSnackbar:A}=(0,g.Ds)(),[D,F]=s.useState(),[H,L]=s.useState([]),[_,z]=s.useState(),[U,J]=s.useState(!1),[K,V]=s.useState(!1),X=q.Z.useGetRackQuery({}),Y=(null===X||void 0===X||X.data,q.Z.useGetShelvesQuery({})),$=null===Y||void 0===Y?void 0:Y.data,ee=Z.Z.useGetStoreProductsQuery({TaggingId:D}),te=null===ee||void 0===ee?void 0:ee.data,le=p.Z.useGetPendingReleaseQuery({}),[se,ae]=(null===le||void 0===le||le.data,y.Z.useStockOutboundMutation()),ne=Z.Z.useGetStoreStocksQuery({TaggingId:D}),re=(null===ne||void 0===ne||ne.data,p.Z.useGetRequestQuery({})),de=null===re||void 0===re?void 0:re.data,ce=p.Z.useGetRequestDetailQuery({RequestCode:_}),ie=null===ce||void 0===ce?void 0:ce.data,[oe,ue]=Z.Z.useReceiveStockMutation(),he=e=>{const{name:t,value:l}=e.target;W({...M,[t]:l})};let me=0;console.log(H);return(0,b.jsxs)("div",{children:[U&&(0,b.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:()=>{J(!U)},children:[(0,b.jsx)(w.Z,{}),(0,b.jsx)(j.Z,{className:"font-bold",children:"Back"})]}),(0,b.jsx)(j.Z,{className:"text-center font-bold my-5",variant:"h4",children:"Material Issuance"}),U?(0,b.jsxs)("div",{children:[!(null!==ie&&void 0!==ie&&ie.request)&&(0,b.jsx)("div",{className:"flex justify-center items-center 50vh",children:(0,b.jsx)("div",{className:"border-t-4 border-blue-500 border-solid rounded-full animate-spin h-12 w-12"})}),(null===ie||void 0===ie?void 0:ie.request)&&(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"flex gap-6",children:(0,b.jsxs)(f.Z,{title:"",className:"px-8 py-4 w-full bg-black rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsxs)("div",{className:"mb-5 w-full",children:[(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:"flex justify-between gap-8 w-1/2",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(j.Z,{className:"text-white mb-2 ml-3 w-full",children:"Select Shelf"}),(0,b.jsx)(d.Z,{className:"w-full",fullWidth:!0,children:(0,b.jsx)(n.Z,{className:"bg-white w-full",name:"shelfCode",value:null===M||void 0===M?void 0:M.shelfCode,onChange:he,children:null===$||void 0===$?void 0:$.map((e=>(0,b.jsx)(r.Z,{value:null===e||void 0===e?void 0:e.label,children:null===e||void 0===e?void 0:e.label})))})})]})}),(0,b.jsx)("div",{className:"flex justify-between gap-8  w-1/2",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(j.Z,{className:"text-white mb-2 ml-3 w-full",children:"Request Code"}),(0,b.jsx)(d.Z,{className:"w-full",fullWidth:!0,children:(0,b.jsx)(a.Z,{className:"bg-white rounded-full",name:"requestCode",value:null===ie||void 0===ie||null===(e=ie.request)||void 0===e?void 0:e.code,onChange:he,fullWidth:!0,readOnly:!0,placeholder:"Click to input Request Code"})})]})})]}),(0,b.jsxs)(d.Z,{className:"w-full mt-4",fullWidth:!0,children:[(0,b.jsx)(j.Z,{className:"text-white ml-3 ",children:"Comments"}),(0,b.jsx)(a.Z,{className:"bg-white rounded-full",multiline:!0,rows:2,name:"comment",value:null===M||void 0===M?void 0:M.comment,onChange:he,fullWidth:!0,placeholder:"Click to input Comment"})]}),(0,b.jsxs)("div",{className:"text-white mt-8 ",children:[(0,b.jsx)(j.Z,{variant:"h5",className:"font-bold mb-5 text-center",children:"Requested Items"}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-white",children:[(0,b.jsx)("div",{className:"text-white",children:(0,b.jsx)("p",{className:"text-base font-bold",children:"Product"})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-base font-bold",children:"Quantity"})})]}),null===ie||void 0===ie||null===(t=ie.requestedItems)||void 0===t?void 0:t.map((e=>(0,b.jsxs)("div",{className:"flex justify-between items-center text-white",children:[(0,b.jsx)("div",{className:"text-white",children:(0,b.jsx)("p",{className:"text-white mt-1 text-center",children:null===e||void 0===e?void 0:e.name})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-white mt-1 ",children:null===e||void 0===e?void 0:e.quantity})})]})))]})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)(j.Z,{variant:"h4",className:"font-bold",children:"ADD ITEMS"}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:"flex justify-between gap-8 w-1/2",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(j.Z,{className:"text-white mb-2 ml-3 w-full",children:"Select Product"}),(0,b.jsx)(d.Z,{className:"w-full",fullWidth:!0,children:(0,b.jsx)(n.Z,{className:"bg-white w-full",name:"productBarcode",value:null===M||void 0===M?void 0:M.productBarcode,onChange:he,children:null===te||void 0===te?void 0:te.filter((e=>null===e||void 0===e?void 0:e.barcode)).filter((e=>null===ie||void 0===ie?void 0:ie.requestedItems.some((t=>t.name===e.name)))).map((e=>(0,b.jsx)(r.Z,{value:null===e||void 0===e?void 0:e.barcode,children:null===e||void 0===e?void 0:e.name})))})})]})}),(0,b.jsx)("div",{className:"flex justify-between gap-8  w-1/2",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(j.Z,{className:"text-white mb-2 ml-3 w-full",children:"Quantity"}),(0,b.jsx)(d.Z,{className:"w-full",fullWidth:!0,children:(0,b.jsx)(a.Z,{className:"bg-white rounded-full",name:"quantity",value:null===M||void 0===M?void 0:M.quantity,onChange:he,fullWidth:!0,placeholder:"Click to input Quantity"})})]})})]}),(0,b.jsx)(c.Z,{className:"mt-4",onClick:()=>{me+=1;let e={id:H.length+1,productBarcode:M.productBarcode,quantity:M.quantity},t=[];t=[...t,e],M.productBarcode&&M.quantity?L([...H,e]):A("Please make sure all fields are duefully filled",{variant:"error"})},children:"Add"})]}),(0,b.jsx)(h.Z,{component:x.Z,children:(0,b.jsxs)(i.Z,{children:[(0,b.jsx)(m.Z,{children:(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(u.Z,{children:"#"}),(0,b.jsx)(u.Z,{children:"Product Barcode"}),(0,b.jsx)(u.Z,{children:"Quantity"}),(0,b.jsx)(u.Z,{children:"Action"})]})}),(0,b.jsx)(o.Z,{children:H.map(((e,t)=>(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(u.Z,{children:t+1}),(0,b.jsx)(u.Z,{children:e.productBarcode}),(0,b.jsx)(u.Z,{children:e.quantity}),(0,b.jsx)(u.Z,{onClick:()=>(e=>{const t=H.filter((t=>t.id!==e.id));L(t)})(e),className:"text-red-400 cursor-pointer",children:"Remove"})]},t)))})]})})]})]}),(0,b.jsxs)(c.Z,{disabled:!(null!==M&&void 0!==M&&M.shelfCode)||!(null!==H&&void 0!==H&&H.length)||!(null!==ie&&void 0!==ie&&null!==(l=ie.request)&&void 0!==l&&l.code)||!(null!==M&&void 0!==M&&M.comment),onClick:async()=>{var e;V(!0);let t={shelfCode:M.shelfCode,requestCode:null===ie||void 0===ie||null===(e=ie.request)||void 0===e?void 0:e.code,comment:M.comment,items:H};console.log(t),W();try{const e=await se({data:t}).unwrap();console.log(e),e.message?A(e.message,{variant:"error"}):A("Released successfully",{variant:"success"}),W()}catch(s){var l;console.log(s),A(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message,"Failed to login",{variant:"error"}),W()}},className:"p-3 w-full bg-[#2BDF27] flex justify-center gap-9 items-center text-base my-6",children:[K&&(0,b.jsx)("div",{class:"flex items-center justify-center",children:(0,b.jsx)("div",{class:"border-t-4 border-white border-solid rounded-full animate-spin h-4 w-4"})}),"Release"]})]})})})]}):(0,b.jsx)(x.Z,{elevation:3,children:(0,b.jsx)(h.Z,{component:x.Z,children:(0,b.jsxs)(i.Z,{children:[(0,b.jsx)(m.Z,{children:(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(u.Z,{children:"#"}),(0,b.jsx)(u.Z,{children:"Code"}),(0,b.jsx)(u.Z,{children:"Message"}),(0,b.jsx)(u.Z,{children:"Requested By"}),(0,b.jsx)(u.Z,{children:"Released By"}),(0,b.jsx)(u.Z,{children:"Action"})]})}),(0,b.jsx)(o.Z,{children:null===de||void 0===de?void 0:de.filter((e=>2===e.status)).map(((e,t)=>(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(u.Z,{children:t+1}),(0,b.jsx)(u.Z,{children:e.code}),(0,b.jsx)(u.Z,{children:e.message}),(0,b.jsx)(u.Z,{children:e.receiverId}),(0,b.jsx)(u.Z,{children:e.userId}),(0,b.jsx)(u.Z,{onClick:()=>{z(null===e||void 0===e?void 0:e.code),J(!U)},className:"text-red-400 cursor-pointer",children:"Release"})]},e.id)))})]})})})]})}},38089:(e,t,l)=>{l.d(t,{Z:()=>n});var s=l(40233),a=l(80184);const n=(0,s.Z)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackTwoTone")},48928:(e,t,l)=>{l.d(t,{Z:()=>j});var s=l(87462),a=l(63366),n=l(72791),r=l(28182),d=l(94419),c=l(76863),i=l(67254),o=l(56650),u=l(21217);function h(e){return(0,u.Z)("MuiCard",e)}(0,l(75878).Z)("MuiCard",["root"]);var m=l(80184);const v=["className","raised"],x=(0,c.ZP)(o.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),j=n.forwardRef((function(e,t){const l=(0,i.Z)({props:e,name:"MuiCard"}),{className:n,raised:c=!1}=l,o=(0,a.Z)(l,v),u=(0,s.Z)({},l,{raised:c}),j=(e=>{const{classes:t}=e;return(0,d.Z)({root:["root"]},h,t)})(u);return(0,m.jsx)(x,(0,s.Z)({className:(0,r.Z)(j.root,n),elevation:c?8:void 0,ref:t,ownerState:u},o))}))}}]);
//# sourceMappingURL=4939.c7092a62.chunk.js.map