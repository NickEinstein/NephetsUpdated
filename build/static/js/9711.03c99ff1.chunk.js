"use strict";(self.webpackChunktest_web=self.webpackChunktest_web||[]).push([[9711],{44938:(e,t,l)=>{l.d(t,{Z:()=>a});var r=l(43973);const s="/delivery",a=r.R.injectEndpoints({endpoints:e=>({finalDelivery:e.mutation({query:e=>({url:"".concat(s),method:"POST",...e})}),discard:e.mutation({query:e=>({url:"".concat(s,"/Discard-Delivery"),method:"DELETE",...e})}),stockDelivery:e.mutation({query:e=>({url:"".concat(s,"/add-delivery-Item"),method:"POST",...e})}),getAllDeliveries:e.query({query:e=>({url:"".concat(s),method:"GET"})}),getTempDeliveries:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(s,"/Get-DeliveryDetails"),method:"GET"}}})})})},19711:(e,t,l)=>{l.r(t),l.d(t,{default:()=>I});var r=l(72791),s=l(75017),a=l(81898),n=l(59513),d=l.n(n),o=l(17205),i=l(21680),u=l(19773),c=l(24390),m=l(69963),h=l(9827),v=l(60807),y=l(56650),p=l(4565),x=l(48928),f=l(97008),j=l(8152),b=l(44938),g=l(43973);const Z="/vendors",w=g.R.injectEndpoints({endpoints:e=>({getVendors:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(Z),method:"GET"}}}),getCategories:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(Z,"/category"),method:"GET"}}}),getAllBikes:e.query({query:e=>{const{pageNo:t}=e;return console.log(t),{url:"".concat(Z,"/company/bikes"),method:"GET",params:{pageNo:t}}}}),getAll:e.query({query:e=>{const{userType:t,pageNo:l}=e;return{url:"".concat(Z,"/company/getalluser"),method:"GET",params:{userType:t,pageNo:l}}}}),getAllVerified:e.query({query:e=>{const{userType:t,verified:l,pageNo:r}=e;return{url:"".concat(Z,"/company/getBothVerifiedUnverifiedUsers"),method:"GET",params:{userType:t,verified:l}}}}),getAllCompanyRiders:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(Z,"/company/getalluser"),method:"GET",params:{userType:t}}}}),getAllCompanyCustomers:e.query({query:e=>{const{userType:t}=e;return{url:"".concat(Z,"/company/getalluser"),method:"GET",params:{userType:t}}}}),getAllTrips:e.query({query:e=>({url:"".concat(Z,"/super-admin/getAllTripRequest"),method:"GET"})}),getStats:e.query({query:e=>({url:"".concat(Z,"/super-admin/userStatsChart"),method:"GET"})})})});var N=l(70393),q=(l(68639),l(16871)),C=l(80184);const I=()=>{const[e,t]=(0,r.useState)(0),[l,n]=(0,r.useState)([]),[g,Z]=(0,r.useState)(!1),{enqueueSnackbar:I}=(0,N.Ds)(),T=j.Z.useGetStoreProductsQuery({}),k=null===T||void 0===T?void 0:T.data,D=b.Z.useGetTempDeliveriesQuery({refreshD:e}),E=null===D||void 0===D?void 0:D.data;console.log(E);const S=w.useGetVendorsQuery({}),G=null===S||void 0===S?void 0:S.data;console.log(G);const[P,A]=b.Z.useStockDeliveryMutation(),[O,W]=b.Z.useDiscardMutation(),[M,R]=b.Z.useFinalDeliveryMutation(),[Q,V]=(0,r.useState)({userId:0,productId:null,unitCost:"",quantity:"",waybill:"",workOrder:"",vendorId:""}),[B,F]=(0,r.useState)(),[U,_]=(0,r.useState)(null),L=(0,q.s0)(),z=e=>{const{name:t,value:l}=e.target;V({...Q,[t]:l})};return(0,C.jsxs)("div",{children:[(0,C.jsx)(p.Z,{className:"text-center font-bold my-5",variant:"h4",children:"Stock Deliveries"}),(0,C.jsxs)("div",{className:"flex gap-6",children:[(0,C.jsxs)(x.Z,{title:"",className:"px-8 py-4 w-1/3 bg-black rounded-2xl",children:[(0,C.jsx)(p.Z,{variant:"h4",className:"font-bold text-center"}),(0,C.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:e=>{e.preventDefault()},children:[(0,C.jsxs)(a.Z,{fullWidth:!0,children:[(0,C.jsx)("label",{className:"text-white",children:"Select Product"}),(0,C.jsx)(f.Z,{className:"m-2",disablePortal:!0,value:U,onChange:(e,t)=>{V({...Q,productId:null===t||void 0===t?void 0:t.id}),_(t)},options:null===k||void 0===k?void 0:k.map((e=>({label:null===e||void 0===e?void 0:e.name,id:null===e||void 0===e?void 0:e.id}))),sx:{minWidth:200},renderInput:e=>(0,C.jsx)(s.Z,{...e})})]}),(0,C.jsxs)("div",{className:"flex gap-4",children:[(0,C.jsx)(s.Z,{className:"bg-white rounded-full",name:"quantity",value:Q.quantity,onChange:z,fullWidth:!0,placeholder:"Click to input Quantity"}),(0,C.jsx)(s.Z,{className:"bg-white rounded-full",name:"unitCost",value:Q.unitCost,onChange:z,fullWidth:!0,placeholder:"Click to input Cost"})]}),(0,C.jsx)("div",{className:"w-full flex justify-center",children:(0,C.jsx)(o.Z,{onClick:async()=>{Z(!0);let e={...Q,userId:0,productId:+Q.productId,unitCost:+Q.unitCost,quantity:+Q.quantity};l.find((e=>(null===e||void 0===e?void 0:e.productId)==Q.productId))?(I("Item already Exists on your list",{variant:"error"}),Z(!1)):(Z(!1),n([...l,{productName:U.label,productId:+Q.productId,unitCost:+Q.unitCost,quantity:+Q.quantity}])),console.log(e),V({userId:0,productId:"",unitCost:"",quantity:""}),_(null)},children:"Add New Item"})}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,C.jsx)(d(),{className:"h-30",selected:B,onChange:e=>F(e)})}),(0,C.jsx)("label",{className:"text-white",children:"Delivery Date"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(s.Z,{className:"bg-white rounded-full",name:"waybill",value:Q.waybill,onChange:z,fullWidth:!0}),(0,C.jsx)("label",{className:"text-white",children:"Waybill"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(s.Z,{className:"bg-white rounded-full",name:"workOrder",value:Q.workOrder,onChange:z,fullWidth:!0}),(0,C.jsx)("label",{className:"text-white",children:"Work Order No."})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(a.Z,{fullWidth:!0,children:(0,C.jsx)(f.Z,{className:"m-2",disablePortal:!0,onChange:(e,t)=>V({...Q,vendorId:null===t||void 0===t?void 0:t.id}),options:null===G||void 0===G?void 0:G.map((e=>({label:null===e||void 0===e?void 0:e.name,id:null===e||void 0===e?void 0:e.id}))),sx:{minWidth:200},renderInput:e=>(0,C.jsx)(s.Z,{...e})})}),(0,C.jsx)("label",{className:"text-white",children:"Vendor"})]}),(0,C.jsx)("div",{className:"flex gap-3 w-full justify-center",children:(0,C.jsxs)(o.Z,{type:"submit",variant:"contained",className:"p-3 w-full bg-[#2BDF27] flex justify-center gap-9 items-center text-base mb-6",onClick:async()=>{Z(!0);let e={...Q,id:0,userId:0,date:B,waybill:Q.waybill,workOrderNo:Q.workOrder,purchaseId:null,vendorId:Q.vendorId,items:[...l]};if(B&&null!==Q&&void 0!==Q&&Q.waybill&&null!==Q&&void 0!==Q&&Q.workOrder&&null!==Q&&void 0!==Q&&Q.vendorId&&l.length>0)try{await M({data:e}).unwrap();Z(!1),I("Delivery Posted",{variant:"success"}),V({userId:0,productId:"",unitCost:"",quantity:"",waybill:"",workOrder:"",vendorId:""}),L("/delivery-report")}catch(t){console.log(t.data.title),Z(!1),I(t.data.title||"Please make sure all fields were properly entered","Please make sure all fields were properly entered","Failed",{variant:"error"})}else I("Please Properly input data",{variant:"error"}),Z(!1)},children:[g&&(0,C.jsx)("div",{class:"flex items-center justify-center",children:(0,C.jsx)("div",{class:"border-t-4 border-white border-solid rounded-full animate-spin h-4 w-4"})}),"Post Delivery"]})})]})]}),(0,C.jsxs)(x.Z,{title:"",className:"px-8 py-4 w-2/3 bg-black rounded-2xl",children:[(0,C.jsx)(o.Z,{onClick:()=>n([]),className:"bg-red-500 text-white font-bold text-base mb-4",children:"Discard Delivery"}),(0,C.jsx)(m.Z,{component:y.Z,children:(0,C.jsxs)(i.Z,{children:[(0,C.jsx)(h.Z,{children:(0,C.jsxs)(v.Z,{className:"font-bold",children:[(0,C.jsx)(c.Z,{className:"font-bold",children:"Product "}),(0,C.jsx)(c.Z,{className:"font-bold",children:"Quantity"}),(0,C.jsx)(c.Z,{className:"font-bold",children:"Unit Cost"}),(0,C.jsx)(c.Z,{className:"font-bold",children:"Action"})]})}),(0,C.jsx)(u.Z,{children:null===l||void 0===l?void 0:l.map((e=>(0,C.jsxs)(v.Z,{children:[(0,C.jsx)(c.Z,{children:e.productName}),(0,C.jsx)(c.Z,{children:e.quantity}),(0,C.jsx)(c.Z,{children:e.unitCost}),(0,C.jsx)(c.Z,{children:(0,C.jsx)(o.Z,{onClick:()=>{(e=>{let t=null===l||void 0===l?void 0:l.filter((t=>(null===t||void 0===t?void 0:t.productId)!==e));n(t)})(e.productId)},className:"text-white font-bold bg-red-500",children:"Delete"})})]},e.productId)))})]})})]})]})]})}},48928:(e,t,l)=>{l.d(t,{Z:()=>p});var r=l(87462),s=l(63366),a=l(72791),n=l(28182),d=l(94419),o=l(76863),i=l(67254),u=l(56650),c=l(21217);function m(e){return(0,c.Z)("MuiCard",e)}(0,l(75878).Z)("MuiCard",["root"]);var h=l(80184);const v=["className","raised"],y=(0,o.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),p=a.forwardRef((function(e,t){const l=(0,i.Z)({props:e,name:"MuiCard"}),{className:a,raised:o=!1}=l,u=(0,s.Z)(l,v),c=(0,r.Z)({},l,{raised:o}),p=(e=>{const{classes:t}=e;return(0,d.Z)({root:["root"]},m,t)})(c);return(0,h.jsx)(y,(0,r.Z)({className:(0,n.Z)(p.root,a),elevation:o?8:void 0,ref:t,ownerState:c},u))}))}}]);
//# sourceMappingURL=9711.03c99ff1.chunk.js.map